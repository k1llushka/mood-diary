name: üìì –î–Ω–µ–≤–Ω–∏–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è

on:
  schedule:
    - cron: "0 18 * * *"   # –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 18:00
  workflow_dispatch:       # –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—Ä—É—á–Ω—É—é –∑–∞–ø—É—Å—Ç–∏—Ç—å

jobs:
  track-mood:
    runs-on: ubuntu-latest

    steps:
      - name: üì• –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
        uses: actions/checkout@v4

      - name: ‚úèÔ∏è –°–æ–∑–¥–∞—Ç—å –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å —Ñ–∞–π–ª mood_diary.txt
        run: |
          TODAY=$(date +"%Y-%m-%d")

          # –ï—Å–ª–∏ —Ñ–∞–π–ª–∞ –Ω–µ—Ç ‚Äî —Å–æ–∑–¥–∞—ë–º –∑–∞–≥–æ–ª–æ–≤–æ–∫
          if [ ! -f mood_diary.txt ]; then
            echo "üìò –î–ù–ï–í–ù–ò–ö –ù–ê–°–¢–†–û–ï–ù–ò–Ø" > mood_diary.txt
            echo "" >> mood_diary.txt
          fi

          # –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–ø–∏—Å—å —Å —Å–µ–≥–æ–¥–Ω—è—à–Ω–µ–π –¥–∞—Ç–æ–π
          echo "${TODAY}: ______________________" >> mood_diary.txt

      - name: üìÑ –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞
        run: cat mood_diary.txt

      - name: üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ GitHub
        run: |
          git config --global user.email "github-actions@github.com"
          git config --global user.name "GitHub Actions"

          git add mood_diary.txt
          git commit -m "–î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–ø–∏—Å—å –∑–∞ $(date +"%Y-%m-%d")" || echo "–ù–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π"
          git push
